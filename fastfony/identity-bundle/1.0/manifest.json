{
    "bundles": {
        "Fastfony\\IdentityBundle\\FastfonyIdentityBundle": ["all"]
    },
    "copy-from-recipe": {
        "config/": "%CONFIG_DIR%/"
    },
    "add-lines": [
        {
            "file": "config/packages/stof_doctrine_extensions.yaml",
            "content": "    orm:\n        default:\n            timestampable: true\n",
            "position": "after_target",
            "target": "stof_doctrine_extensions:",
            "warn_if_missing": true
        },
        {
            "file": "config/packages/security.yaml",
            "content": "        fastfony_identity_user_provider:\n            entity:\n                class: Fastfony\\IdentityBundle\\Entity\\Identity\\User # if you extend the User class, change this to your class\n                property: email\n\n",
            "position": "after_target",
            "target": "    providers:",
            "warn_if_missing": true
        },
        {
            "file": "config/packages/security.yaml",
            "content": "\n        fastfony_identity:\n            lazy: true\n            provider: fastfony_identity_user_provider\n            user_checker: Fastfony\\IdentityBundle\\Security\\UserChecker\n            form_login:\n                login_path: form_login\n                check_path: form_login\n                enable_csrf: true\n                csrf_token_id: login\n                form_only: true\n            login_link:\n                check_route: login_check\n                signature_properties: [ id, email ]\n                max_uses: 3\n            entry_point: Fastfony\\IdentityBundle\\Security\\CustomEntryPoint\n            remember_me:\n                always_remember_me: true\n                signature_properties: [ 'id', 'email', 'password' ]\n            switch_user: true\n            login_throttling:\n                max_attempts: 3\n            logout:\n                path: /logout\n                clear_site_data:\n                    - cookies\n                    - storage\n\n",
            "position": "after_target",
            "target": "            security: false",
            "warn_if_missing": true
        },
        {
            "file": "config/packages/security.yaml",
            "content": "        - { path: ^/secure-area/, roles: ROLE_USER } # Adjust as needed\n",
            "position": "after_target",
            "target": "    access_control:",
            "warn_if_missing": true
        }
    ]
}
